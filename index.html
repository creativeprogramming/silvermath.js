<!DOCTYPE html>
<html><head>
	<title>Equation Editor</title>
	<script type="text/javascript" src="equation.js"></script>
	<script type="text/javascript">

var equation;
var cursor;
var renderer;
var interval;

function resetCursor() {
	cursor = true;
	redrawCursor();
	clearInterval(interval);
	interval = setInterval(redrawCursor, 500);
}

function redrawCursor() {
	equation.render(renderer, cursor);
	cursor = !cursor;
}

window.onkeydown = function(e) {
	if (e.which == 37) {
		if (--equation.cursorIndex < 0) equation.cursorIndex = 0;
		resetCursor();
	} else if (e.which == 39) {
		if (++equation.cursorIndex >= equation.container.anchorCount) equation.cursorIndex = equation.container.anchorCount - 1;
		resetCursor();
	}
};

window.onload = function() {
	var canvas = document.createElement('canvas');
	document.body.appendChild(canvas);
	canvas.width = 400;
	equation = new eq.Equation();
	renderer = new eq.CanvasRenderer(canvas);
	resetCursor();
};

	</script>
	<link type="text/css" href="style.css" rel="stylesheet">
</head><body>
</body></html>
